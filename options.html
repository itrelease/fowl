<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <title>fowl â€” options page</title>
</head>
<body>
  <script src="/javascripts/fowl/storage.js"></script>
  
  <script src="/javascripts/3dparty/jsOAuth-1.3.1/jsOAuth.min.js"></script>
  <script src="/javascripts/twitter/init.js"></script>
  
  <script>
    (function(){      
      if( !fowl.storage.get('access_token_key') ){
        var params = {
          consumerKey: 'JKlz1sCj7Ad30giHvwztlw',
          consumerSecret: '2qjuHPYGR7CcSDtH2Fcaesv5aEdxETNPOfGs0uHhc',
          callbackUrl: chrome.extension.getURL('options.html')
        };

        T.authorize(params, function( accessTokenKey, accessTokenSecret ){
          fowl.storage.set( 'consumer_key', params.consumerKey );
          fowl.storage.set( 'consumer_secret', params.consumerSecret );
        
          fowl.storage.set( 'access_token_key', accessTokenKey );
          fowl.storage.set( 'access_token_secret', accessTokenSecret );
        });
      }
    })();
  </script>
</body>
</html>