<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <title>fowl â€” options page</title>
</head>
<body>
  <script src="/javascripts/3dparty/jsOAuth-1.3.1/jsOAuth.min.js"></script>
  <script src="/javascripts/twitter/init.js"></script>
  
  <script>
    (function(){
      var background = chrome.extension.getBackgroundPage(),
          credentials = background.getCredentials();
      
      if( !credentials.accessTokenKey ){
        var params = {
          consumerKey: 'JKlz1sCj7Ad30giHvwztlw',
          consumerSecret: '2qjuHPYGR7CcSDtH2Fcaesv5aEdxETNPOfGs0uHhc',
          callbackUrl: chrome.extension.getURL('options.html')
        };

        T.authorize(params, function( accessTokenKey, accessTokenSecret ){
          background.storeCredentials( accessTokenKey, accessTokenSecret, params.consumerKey, params.consumerSecret );
          setTimeout(function(){
            background.init();
          }, 0);
        });
      }
    })();
  </script>
</body>
</html>