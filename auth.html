<!doctype html>
<html>
<head>
  <meta charset="UTF-8">
  <title>fowl â€” options page</title>
</head>
<body>
  <script src="/javascripts/3dparty/jsOAuth-1.3.1/jsOAuth.min.js"></script>
  <script src="/javascripts/twitter/init.js"></script>
  
  <script>
    (function(){
      var background = chrome.extension.getBackgroundPage(),
          credentials = background.getCredentials();
      
      if( !credentials.accessTokenKey ){
        var params = {
          consumerKey: 'JKlz1sCj7Ad30giHvwztlw',
          consumerSecret: '2qjuHPYGR7CcSDtH2Fcaesv5aEdxETNPOfGs0uHhc',
          callbackUrl: chrome.extension.getURL('auth.html')
        };

        T.authorize(params, function( accessTokenKey, accessTokenSecret, aScreenName, aUserId ){
          // chrome-extension://kbjjlppgpejpghnaafndapdccbefjela/
          background.storeCredentials( aScreenName, aUserId, accessTokenKey, accessTokenSecret, params.consumerKey, params.consumerSecret );
          background.init();
        });
      }
    })();
  </script>
</body>
</html>